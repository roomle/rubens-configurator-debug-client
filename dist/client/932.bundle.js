"use strict";(self.webpackChunkconfigurator_debug=self.webpackChunkconfigurator_debug||[]).push([[932],{932:(t,e,n)=>{n.d(e,{DragInFromWebsiteStrategy:()=>c});var i=n(319),o=n(93),s=Object.defineProperty,a=(t,e,n)=>((t,e,n)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n)(t,"symbol"!=typeof e?e+"":e,n);const r=(t,e,n=0,i=0)=>{const o=e.x+e.width+n,s=e.x-n,a=e.y+e.height+i,r=e.y-i,{x:h,y:l}=t;return h>=s&&h<=o&&l>=r&&l<=a},h=(t,e,n,i=0,o=0)=>{if(n&&(n.hiddenIn||n.visibleIn))return n.visibleIn?r({x:t,y:e},n.visibleIn,i,o):!!n.hiddenIn&&!r({x:t,y:e},n.hiddenIn,-i,-o)};class l{constructor(t=null){a(this,"_dragGhostAnimationFrameId",null),a(this,"_dragGhostRemoveAnimationFrameId",null),a(this,"_dragGhostElement",null),this._dragGhostElement=t}updateDragGhost(t,e,n){var i;this._dragGhostRemoveAnimationFrameId&&(cancelAnimationFrame(this._dragGhostRemoveAnimationFrameId),this._dragGhostRemoveAnimationFrameId=null),(null==(i=n.ghost)||!i.external)&&n.ghost&&(this._dragGhostAnimationFrameId||(this._dragGhostAnimationFrameId=requestAnimationFrame((()=>{(()=>{if(!document.getElementById(o.a)){const t=document.createElement("style");t.type="text/css",t.id=o.a,t.innerHTML=`\n    ${o.b}\n    ${o.c}\n  `,document.head.appendChild(t)}})();const i={x:t,y:e};!n.ghost&&this._dragGhostElement&&(n.ghost={}),n.ghost&&!n.ghost.element&&this._dragGhostElement&&(n.ghost.element=this._dragGhostElement),(({x:t,y:e},n)=>{var i,s,a,r,l,c;let d=document.getElementById(o.R);if(!d){if(d=document.createElement("div"),null!=(i=n.ghost)&&i.element)d.appendChild(n.ghost.element);else{const t=document.createElement("img");t.src=(null==(s=n.ghost)?void 0:s.url)||o.d,t.width=(null==(a=n.ghost)?void 0:a.width)||o.e,t.height=(null==(r=n.ghost)?void 0:r.height)||o.f,d.appendChild(t)}d.id=o.R,d.style.position="fixed",d.style.top="0",d.style.left="0",d.style.willChange="transform",d.style.transform="translate3d(0, 0, 0)",d.style.zIndex="9999",d.style.opacity="0.5",h(t,e,n.ghost||{},null==(l=n.settings)?void 0:l.dragInOverlapX,null==(c=n.settings)?void 0:c.dragInOverlapY)||(d.style.display="none"),d.style.pointerEvents="none",document.body.appendChild(d)}})(i,n),(({x:t,y:e},n)=>{var i,s,a,r;const l=document.getElementById(o.R);if(!l)return;let c=null==(i=n.ghost)?void 0:i.width,d=null==(s=n.ghost)?void 0:s.height;typeof c>"u"&&(c=l.getBoundingClientRect().width||o.e),typeof d>"u"&&(d=l.getBoundingClientRect().height||o.f);const u=t-c/2,g=e-d/2;l.style.transform=`translate3d(${u}px, ${g}px, 0)`,n.ghost&&(h(t,e,n.ghost,null==(a=n.settings)?void 0:a.dragInOverlapX,null==(r=n.settings)?void 0:r.dragInOverlapY)?l.style.animation!=o.g&&(l.style.animation=o.g):l.style.animation!=o.h&&(l.style.animation=o.h))})(i,n),this._dragGhostAnimationFrameId=null}))))}removeDragGhost(){this._dragGhostAnimationFrameId&&(cancelAnimationFrame(this._dragGhostAnimationFrameId),this._dragGhostAnimationFrameId=null),this._dragGhostRemoveAnimationFrameId||(this._dragGhostRemoveAnimationFrameId=requestAnimationFrame((()=>{const t=document.getElementById(o.R);t&&document.body.removeChild(t),this._dragGhostRemoveAnimationFrameId=null})))}}class c{constructor(t,e,n){a(this,"_options",{}),a(this,"_instance"),a(this,"_mainDomElement"),a(this,"_currentDrag",{}),a(this,"_currentTouch",null),a(this,"_firefoxDragPosition",{x:0,y:0}),a(this,"_onBeforeUpdateDrag",(()=>({}))),a(this,"isDragging",!1),a(this,"_firefoxFallback",(t=>{if(!this._currentDrag.event)return;const e=t||window.event;this._firefoxDragPosition.x=e.pageX||0,this._firefoxDragPosition.y=e.pageY||0})),this._instance=t,this._mainDomElement=e,this._options=n||{},this._firefoxFallback=this._firefoxFallback.bind(this),document.addEventListener("dragover",this._firefoxFallback)}beforeUpdateGhost(t){this._onBeforeUpdateDrag=t}dragStart(t,e,n="rml_id"){const s=this._mainDomElement.parentNode;if("relative"!==(0,i.g)(s).position)return void console.warn("Parent of iframe should have position relative, otherwise drag-in can not detect the x/y coordinates correctly");this._mainDomElement.style.pointerEvents="none";let a=s.querySelector("."+o.i);a||(a=document.createElement("div"),a.classList.add(o.i),s.appendChild(a)),a.classList.remove(o.j.DISPLAY_NONE),e.target.getAttribute("draggable")||console.warn("Draggable not detected correctly! Did you add draggable=\"true\" to the element? In Sarafi only 'draggable' is too less");const r=s.querySelector("."+o.k);this._currentDrag.event=e;const h=e.target,c=h.cloneNode(),d=h.getBoundingClientRect();c.style.width=`${d.width}px`,c.style.height=`${d.height}px`,this._currentDrag.ghost=new l(c),this._currentDrag.offset||(this._currentDrag.offset={x:0,y:0});const{clientX:u,clientY:g}=(0,i.e)(e,this._firefoxDragPosition);this._currentDrag.offset.x=u-d.left,this._currentDrag.offset.y=g-d.top,e instanceof DragEvent&&e.dataTransfer&&e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(r,0,0);const{x:m,y:_}=(0,i.a)(s,this._currentDrag.event||e,this._firefoxDragPosition),f=Math.max(1,m),p=Math.max(1,_);this.isDragging=!0,this._instance.dragInObject(t,f,p,n)}dragUpdate(t){var e;const n=this._mainDomElement.parentNode,{x:o,y:s}=(0,i.a)(n,t,this._firefoxDragPosition);if(0===o&&0===s)return;const a=Math.max(1,o),r=Math.max(1,s);if(1===a&&1===r)return;let h=a,l=r;if((0,i.i)(t)){const t=(null==(e=this._options.settings)?void 0:e.fingerSize)||0;h=Math.max(2,a+t),l=Math.max(2,r-t)}const{x:c,y:d,options:u}=this._onBeforeUpdateDrag(h,l,{}),g=u||{settings:{},ghost:{}};g.ghost||(g.ghost={}),g.ghost.visibleIn&&g.ghost.hiddenIn||(g.ghost.hiddenIn=this._mainDomElement.getBoundingClientRect());const m="number"==typeof c?c:h,_="number"==typeof d?d:l;if(this._currentDrag.ghost){const{clientX:e,clientY:n}=(0,i.e)(t,this._firefoxDragPosition);this._currentDrag.ghost.updateDragGhost(e,n,g)}this._instance.updateDrag(m,_,{})}dragEnd(){this._mainDomElement.style.pointerEvents="all";const t=this._mainDomElement.parentNode;this.isDragging=!1,this._instance.dragInObjectEnd(),this._currentDrag.ghost&&(this._currentDrag.ghost.removeDragGhost(),this._currentDrag.ghost=null),this._currentDrag={},this._firefoxDragPosition={x:0,y:0};const e=t.querySelector("."+o.i);e&&e.classList.add(o.j.DISPLAY_NONE)}touchStart(t,e,n="rml_id"){var o,s,a,r;e.preventDefault();const h={};"number"==typeof(null==(s=null==(o=this._options)?void 0:o.settings)?void 0:s.touchDragDelay)&&(h.delay=this._options.settings.touchDragDelay),null!=(r=null==(a=this._options)?void 0:a.settings)&&r.touchDragEpsilon&&(h.epsilon=this._options.settings.touchDragEpsilon),this._currentTouch=new i.T(void 0,{onTouchDragStart:(e,i)=>{this.dragStart(t,i,n)}},h),this._currentTouch.onStart(e)}touchMove(t){this._currentTouch&&this._currentTouch.onMove(t),this._currentDrag.event&&this.dragUpdate(t)}touchEnd(){this._currentTouch&&this._currentTouch.onEnd(),this._currentTouch=null,this.dragEnd()}dispose(){document.removeEventListener("dragover",this._firefoxFallback)}releaseInput(t){}}},319:(t,e,n)=>{n.d(e,{C:()=>f,T:()=>v,a:()=>c,b:()=>g,c:()=>_,d:()=>m,e:()=>d,g:()=>h,i:()=>a});var i=Object.defineProperty,o=(t,e,n)=>((t,e,n)=>e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n)(t,"symbol"!=typeof e?e+"":e,n);class s{constructor(t=16){o(this,"_computedStyleCache",new Map),o(this,"_maxLifetime",16),o(this,"_cacheCleanInterval",null),this._maxLifetime=t}get(t){const e=this._computedStyleCache.get(t),n=Date.now();if(e&&n-e.updated<this._maxLifetime)return e.style;const i=getComputedStyle(t);return this._computedStyleCache.set(t,{style:i,updated:n}),this._cacheCleanInterval||(this._cacheCleanInterval=setInterval((()=>this._cleanUpCache),Math.max(1e3*this._maxLifetime,5e3))),i}_cleanUpCache(){const t=Date.now();for(const[e,{updated:n}]of this._computedStyleCache.entries())t-n>=this._maxLifetime&&this._computedStyleCache.delete(e);0===this._computedStyleCache.size&&this._cacheCleanInterval&&(clearInterval(this._cacheCleanInterval),this._cacheCleanInterval=null)}}const a=t=>window.TouchEvent&&t instanceof window.TouchEvent;let r;const h=t=>(r||(r=new s),r.get(t)),l=(t,e,n)=>{const i=parseFloat(t),o=window.devicePixelRatio||1;if("px"===e)return i;if("%"===e)return i/100*(n===document.documentElement?window.innerWidth:n.offsetWidth);if("rem"===e)return i*parseFloat(h(document.documentElement).fontSize);if("em"===e)return i*parseFloat(h(n).fontSize);if("vh"===e||"vw"===e||"vmin"===e||"vmax"===e)return i/100*{vh:window.innerHeight,vw:window.innerWidth,vmin:Math.min(window.innerWidth,window.innerHeight),vmax:Math.max(window.innerWidth,window.innerHeight)}[e];const s={cm:37.7952755906,mm:3.77952755906,in:96};return e in s?i*s[e]*o:(console.warn("Unable to determine coordinates for drag-in. Therefore drag-in is not possible. Check the CSS that positions the iframe of Roomle"),0)},c=(t,e,n={x:0,y:0})=>{const i=t.getBoundingClientRect(),o=h(t).transform;let s=0,a=0;if("none"!==o){const e=/translate\(\s*([-+]?\d*\.?\d+|\d+)(px|%)?,?\s*([-+]?\d*\.?\d+|\d+)?(px|%)?\s*\)/,n=o.match(e);n&&(s=l(n[1],n[2],t),a=l(n[3],n[4],t))}const{clientX:r,clientY:c}=d(e,n);return{x:r-i.left-s+t.scrollLeft,y:c-i.top-a+t.scrollTop}},d=(t,e=null)=>{const{clientX:n,clientY:i}=a(t)?u(t):t;return{clientX:n>0?n:e?e.x:n,clientY:i>0?i:e?e.y:i}},u=t=>{if(t.touches.length){let{clientX:e,clientY:n}=t.touches[0];if(t.touches.length>1){const i=t.touches[1];e=(e+i.clientX)/2,n=(n+i.clientY)/2}return{clientX:e,clientY:n}}const e=t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}},g=500,m=10,_=100,f=15,p=(t,e=0)=>a(t)?{clientX:t.touches[e].clientX,clientY:t.touches[e].clientY}:{clientX:t.clientX,clientY:t.clientY},y=t=>!t||!a(t)||t.touches.length>0;class v{constructor(t,{onTouchDragStart:e},n={}){o(this,"_touchDragTimeOut"),o(this,"_onTouchDragStart"),o(this,"_payload",null),o(this,"_delay",g),o(this,"_firstTouch",null),o(this,"_lastTouch",null),o(this,"_epsilon",m),this._payload=t,this._onTouchDragStart=e,this._delay="number"==typeof n.delay?n.delay:g,this._epsilon="number"==typeof n.epsilon?n.epsilon:m}onStart(t){y(t)&&(this._touchDragTimeOut||(this._firstTouch=p(t,a(t)?t.touches.length-1:0),this._touchDragTimeOut=setTimeout((()=>{this._clearTimeout(),this._lastTouch||(this._lastTouch=p(t)),this._checkXDistance(t)()}),this._delay)))}onEnd(){this._resetTouches()}onMove(t){y(t)&&(this._lastTouch=p(t))}_clearTimeout(){this._touchDragTimeOut&&(clearTimeout(this._touchDragTimeOut),this._touchDragTimeOut=null)}_resetTouches(){this._clearTimeout(),this._lastTouch=null,this._firstTouch=null,this._payload=null}_checkXDistance(t){return()=>{if(!this._firstTouch||!this._lastTouch)return;let e=!1;e=Math.abs(this._firstTouch.clientX-this._lastTouch.clientX)<this._epsilon,e&&(this._onTouchDragStart(this._payload,t),this._resetTouches())}}}}}]);