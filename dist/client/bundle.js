(()=>{"use strict";var e,t,r={},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var o=s[e]={exports:{}};return r[e](o,o.exports,n),o.exports}n.m=r,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="configurator-debug:",n.l=(r,s,o,i)=>{if(e[r])e[r].push(s);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[s];var h=(t,s)=>{a.onerror=a.onload=null,clearTimeout(g);var n=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(s))),t)return t(s)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=r[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var o=new Promise(((r,n)=>s=e[t]=[r,n]));r.push(s[2]=o);var i=n.p+n.u(t),a=new Error;n.l(i,(r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,s[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,o,[i,a,l]=r,c=0;if(i.some((t=>0!==e[t]))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);l&&l(n)}for(t&&t(r);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkconfigurator_debug=self.webpackChunkconfigurator_debug||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=Object.defineProperty,i=(e,t,r)=>((e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class a{constructor(e,t,r,s){i(this,"_side"),i(this,"_incomingMessageBus"),i(this,"_outgoingMessageBus",null),i(this,"_execMessage",null),this._side=e,this._incomingMessageBus=t,this._outgoingMessageBus=r,this._execMessage=s,this._incomingMessageBus.addEventListener("message",this._handleMessage.bind(this))}setOutgoingMessageBus(e){this._outgoingMessageBus=e}setMessageExecution(e){this._execMessage=e}sendMessage(e,t=[]){return new Promise(((r,s)=>{const n=new MessageChannel;n.port1.onmessage=e=>{if(!e||!e.data)return n.port1.close(),n.port2.close(),s(new Error(this._side+" received message but response can not be interpreted"));let t;try{t=JSON.parse(e.data)}catch(e){return n.port1.close(),n.port2.close(),this._prepareError(e),s(e)}t.error?s(t.error):void 0!==t.result?r(t.result):r(void 0),n.port1.close(),n.port2.close()};let o="";try{o=JSON.stringify({message:e,args:t})}catch{return s(new Error(this._side+": can not create command because it is not JSON.stringify able"))}if(!this._outgoingMessageBus)return s(new Error(this._side+": outgoing bus not set yet"));this._outgoingMessageBus.postMessage(o,"*",[n.port2])}))}_handleMessage(e){const t=e.ports&&Array.isArray(e.ports)&&e.ports.length>0?e.ports[0]:null;if(e.data&&t)try{const r=JSON.parse(e.data);if(!this._execMessage)return t.postMessage(JSON.stringify({error:this._side+" is not ready to handle messages"}));Array.isArray(r.args)||(r.args=[r.args]);const s=this._execMessage(r,e);if(void 0===s)return;s.then(((e={})=>{let r,s;"object"==typeof e&&null!==e&&(r=e.error,s=e.result),r?t.postMessage(JSON.stringify({error:r})):void 0!==s?t.postMessage(JSON.stringify({result:s})):t.postMessage(JSON.stringify({result:e}))}),(e=>{t.postMessage(JSON.stringify({error:this._prepareError(e)}))}))}catch(e){t.postMessage(JSON.stringify({error:this._prepareError(e)}))}}_prepareError(e){if("string"==typeof e){const t=this._side+": "+e;return console.error(t),t}return e.message=this._side+": "+e.message,console.error(e),e.message}}const l=["127.0.0.1","localhost","0.0.0.0"],c=["language","browserLanguage","userLanguage","systemLanguage"],u=(e,t)=>{for(const r in t)try{t[r].constructor===Object?e[r]=u(e[r],t[r]):e[r]=t[r]}catch{e[r]=t[r]}return e};var d={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};const h={mobileLandscape:!0,floorMaterialRootTag:"materials_root",buttons:{renderimage:!0,requestproduct:!0,requestplan:!0,load_product:!0,partlist_print:!0},helpcenter:{roomdesigner:!0,configurator:!1,disable:!1},firstPersonView:!0,saveToIdb:!0,featureFlags:{mocAr:!0}},g=e=>{if(!e)return;const t=Object.keys(e);for(const r of t){const t=e[r];if(!Array.isArray(t)&&"object"==typeof t&&null!==t&&g(t),Array.isArray(t))for(const e of t)g(e);("true"===t||"false"===t)&&(e[r]="true"===t)}},p=()=>{const e={...h};e.locale||(e.locale=((e=null)=>{const t=window.navigator;if(e)return e.substr(0,2);if(Array.isArray(t.languages)&&t.languages.length>0)return t.languages[0].substr(0,2);for(let e=0,r=c.length;e<r;e++){const r=t[c[e]];if(r)return r.substr(0,2)}return"en"})()),"(idle)"===e.id&&delete e.id;const t=(()=>{const e=(()=>{try{return window.self!==window.top}catch{return!0}})();let t=window.location.href;if(e){if(!document.referrer)return null;t=document.referrer}const{hostname:r}=new URL(t);return r})();return t&&(e=>!!(l.includes(e)||e.endsWith("roomle.com")||e.endsWith("gitlab.io")||e.endsWith("gitlab.com")))(t)&&(e.configuratorId="demoConfigurator"),e.customApiUrl=d.VITE_RAPI_URL,e.emails=!1,e},f=()=>/(android)/i.test(navigator.userAgent),m=(e,t,r)=>{let s=null;Object.defineProperty(e,t,{get:()=>s||r,set(e){null!=e&&e.mute?s=e.value:(console.warn("You override Roomle defined behaviour. To disalbe this warning pass in an object with the following properties"),console.warn("{ mute: true, value: () => void }"),s=e)}})},b=()=>.01*window.innerHeight+"px",v=e=>{e&&setTimeout((()=>e.style.setProperty(w,b())),0)},y="rml-styles",w="--rml-full-height",_="rml-container",M="rml-fill",I="rml-pos",E="rml-android-height",O="rml-overflow-hidden",P=new Map;class S{constructor(e,t,r,s,o){if(i(this,"ui",{callbacks:null}),i(this,"extended",{callbacks:null}),i(this,"configurator",{callbacks:null}),i(this,"analytics",{callbacks:{}}),i(this,"global",{callbacks:{}}),i(this,"plugins",{}),i(this,"_waitForIframe"),i(this,"_container"),i(this,"_messageHandler"),i(this,"_configuratorSettings"),i(this,"_initData",{}),i(this,"_iframe"),i(this,"pluginsLoaded",[]),!e||"string"!=typeof e.id)throw new Error("Please provide a correct configuratorId, you get the correct ID from your Roomle Contact Person");if(P.has(t))throw new Error("There is already an instance on this DOM element");if(!document.getElementById(y)){const e=r.zIndex||9999999,t=document.createElement("style");t.type="text/css",t.id=y;const s="transition:all ease-in-out 450ms;",n=["-webkit-","-o-"].reduce(((e,t)=>e+(t+s)),"")+s,o=b();t.innerHTML=`\n        .${_}{${w}:${o};}\n        .${I}{position:fixed;top:0;left:0;z-index:${e};opacity:0}\n        .rml-transition{${n}}\n        .${M}{width:100%;height:100%;opacity:1}\n        .${E}{height:calc(var(${w},1vh)*100)}\n        .${O}{overflow:hidden}\n      `,document.head.appendChild(t)}this._onResize=this._onResize.bind(this),f()&&window.addEventListener("resize",this._onResize),this._container=t,this._initData=r,this._configuratorSettings=e;const l=this._createIframe();this._onUseFullPage=this._onUseFullPage.bind(this),this._executeMessage=this._executeMessage.bind(this),this._onBackToWebsite=this._onBackToWebsite.bind(this),this._messageHandler=new a("website",window,null,this._executeMessage),this._waitForIframe=o,this._container.appendChild(l),this._iframe=l;for(const e of s)"string"==typeof e&&"dragIn"===e?this.pluginsLoaded.push(new Promise(((e,t)=>{try{n.e(156).then(n.bind(n,156)).then((({DragIn:t})=>{const r=new t(this._iframe);r.setInstance(this.ui),this.plugins.dragIn=r,e()}))}catch(e){t(e)}}))):e.name&&e.loader&&this.pluginsLoaded.push(new Promise(((t,r)=>{try{e.loader().then((r=>{const s=new r(this._iframe);s.setInstance(this.ui),this.plugins[e.name]=s,t()}))}catch(e){r(e)}})));P.set(t,!0)}static createPlanner(e,t,r,s=[]){return this._create(e,t,r,s)}static createConfigurator(e,t,r,s=[]){return this._create(e,t,r,s)}static create(e,t,r,s){return this._create(e,t,r,s)}static createViewer(e,t,r,s=[]){return this._create(e,t,r,s)}static async _create(e,t,r,s){return new Promise((async(n,o)=>{try{const o=u(p(),(g(i=r),null!=i&&i.customApiUrl&&(i.customApiUrl=decodeURIComponent(i.customApiUrl)),i.shareUrl&&(i.deeplink=i.shareUrl.replace("<CONF_ID>","#CONFIGURATIONID#")),i));o.featureFlags||(o.featureFlags={}),"boolean"!=typeof o.featureFlags.realPartList&&(o.featureFlags.realPartList=!0),"boolean"!=typeof o.featureFlags.globalCallbacks&&(o.featureFlags.globalCallbacks=!0),"boolean"!=typeof o.featureFlags.mocAr&&(o.featureFlags.mocAr=!1);const a=await(async(e,t)=>{if("string"!=typeof e)throw new Error('Configurator ID is not a string type: "'+typeof e+'"');const r=t.customApiUrl?t.customApiUrl:"https://api.roomle.com/v2",s=t.overrideTenant||9,n=r+"/configurators/"+e,o="roomle_portal_v2",i="03-"+window.btoa((new Date).toISOString()+";anonymous;"+o),a=new Request(n,{method:"GET",headers:new Headers({apiKey:o,currentTenant:s,locale:"en",language:"en",device:1,token:i,platform:"web"}),mode:"cors",cache:"default"}),l=await fetch(a),{configurator:c}=await l.json();return c})(e,o);r=((e,t)=>{t.configuratorId=e.id;const r=e.settings||{};return!t.overrideTenant&&e.tenant&&(t.overrideTenant=e.tenant),((e,t)=>{const r=JSON.parse(JSON.stringify(e));return u(r,t)})(r,t)})(a,o);const l=new this(a,t,r,s,n);return await Promise.allSettled(l.pluginsLoaded),l}catch(e){return o(e)}var i}))}teardown(){this._container&&P.delete(this._container);const e=this._container.querySelector("iframe");e&&this._container.removeChild(e),window.removeEventListener("resize",this._onResize)}_createIframe(){var e;const t=document.createElement("iframe");let r=(null==(e=this._configuratorSettings)?void 0:e.url)||"https://www.roomle.com/t/cp/";return this._initData.useLocalRoomle&&(r=location.href.replace("embedding.html","")),location.href.includes("roomle.gitlab.io")&&(r=location.href.replace("embedding.html","index.html")),this._initData.overrideServerUrl&&(r=this._initData.overrideServerUrl),t.src=r,t.classList.add(_),t.classList.add(M),t}_onResize(){v(this._iframe)}_onUseFullPage(){this._iframe.classList.add(I),document.documentElement.classList.add(O),window.document.body.classList.add(O),f()&&(v(this._iframe),this._iframe.classList.add(E))}_onBackToWebsite(){this._iframe.classList.remove(I),this._iframe.classList.remove(E),document.documentElement.classList.remove(O),window.document.body.classList.remove(O)}_executeMessage({message:e,args:t},r){var s;if(!r.source||r.source!==(null==(s=this._iframe)?void 0:s.contentWindow))return;if("requestBoot"===e)return this._messageHandler.setOutgoingMessageBus(r.source),Promise.resolve({result:this._initData});if("setup"===e){const{methods:e,callbacks:r}=t[0];return e.forEach((e=>{const t=e.split("."),r=t[0],s=t[1];this[r]||(this[r]={}),this[r][s]=function(){return this._messageHandler.sendMessage(e,[...arguments])}.bind(this)})),r.forEach((e=>{const t=e.split("."),r=t[0],s=t[1],n=t[2];this[r]||(this[r]={}),this[r][s]||(this[r][s]={}),this[r][s][n]=()=>{}})),m(this.ui.callbacks,"onUseFullPage",this._onUseFullPage),m(this.ui.callbacks,"onBackToWebsite",this._onBackToWebsite),this._waitForIframe(this),setTimeout((()=>this._messageHandler.sendMessage("websiteReady")),0),Promise.resolve({result:null})}const n=e.split("."),o=n[0],i=n[1],a=3===n.length?n[2]:null;if(a&&this[o][i][a]){const e=this[o][i][a](...t);return e instanceof Promise?e.then((e=>({result:e}))):void 0!==e?Promise.resolve({result:e}):Promise.resolve({result:null})}return Promise.reject('Message "'+e+'" is unkown')}}var k=function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}l((s=s.apply(e,t||[])).next())}))};const L=window.location.search,x=new URLSearchParams(L),A=x.get("id"),T=x.get("serverUrl"),C=[],j=document.getElementById("value-table"),B=()=>{var e;const t=parseInt(R.value,10);if(t<C.length){const r=C[t],s=U.value;if(Object.prototype.hasOwnProperty.call(r.valueMaps,s)){const n=t>0?C[t-1]:null,o=null!==(e=null==n?void 0:n.valueMaps[s])&&void 0!==e?e:void 0;((e,t)=>{F(j);for(const[r,s]of Object.entries(e.values)){let e=null;t&&Object.prototype.hasOwnProperty.call(t.values,r)&&(e=t.values[r]);const n=j.insertRow(),o=n.insertCell(0),i=n.insertCell(1);o.textContent=r,i.textContent=s,null===e?(o.style.color="blue",i.style.color="blue"):e!==s&&(i.style.color="red")}})(r.valueMaps[s],o)}}},U=document.getElementById("map-selection");U.onchange=()=>B();const $=e=>{const t=U.value;let r=0;U.options.length=0;for(const[,s]of Object.entries(e.valueMaps)){if(0===Object.keys(s.values).length||"subpart"===s.type)continue;t===s.id.toString()&&(r=U.options.length);const e=`(id: ${s.id}, parentId: ${s.parentId}) ${s.type} ${s.componentId} ${s.internalId}`;N(U,e,s.id)}for(const[,s]of Object.entries(e.valueMaps)){if(0===Object.keys(s.values).length||"subpart"!==s.type)continue;t===s.id.toString()&&(r=U.options.length);const e=`(id: ${s.id}, parentId: ${s.parentId}) ${s.type} ${s.componentId} ${s.internalId}`;N(U,e,s.id)}U.selectedIndex=r,B()},R=document.getElementById("update-selection");R.onchange=()=>{const e=parseInt(R.value,10);e<C.length&&$(C[e])};const N=(e,t,r)=>{const s=document.createElement("option");s.text=t,s.value=r.toString(),e.add(s)},F=e=>{const t=e.getElementsByTagName("tbody")[0];if(t)for(;t.rows.length>0;)t.deleteRow(0)},D={id:null!=A?A:"usm:frame",overrideServerUrl:null!=T?T:"https://www.roomle.com/t/bo-mvp/",customApiUrl:"https://api.roomle.com/v2"};k(void 0,void 0,void 0,(function*(){const e=yield((e,t)=>k(void 0,void 0,void 0,(function*(){return yield S.createConfigurator("demoConfigurator",e,t,["dragIn"])})))(document.getElementById("configurator-container"),D);e.extended.callbacks.onValueMapChanged=e=>{(e=>{const t=C.length;C.push(e);const r=`(${e.sourceId}) ${e.sourceInfo}`;N(R,r,t),R.selectedIndex=t,$(e)})(e)},e.extended.enableDebugging()}))})();