(()=>{"use strict";var e,t,s={},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return s[e](o,o.exports,n),o.exports}n.m=s,n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,s)=>(n.f[s](e,t),t)),[])),n.u=e=>e+".bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="configurator-debug:",n.l=(s,r,o,i)=>{if(e[s])e[s].push(r);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=s),e[s]=[r];var g=(t,r)=>{a.onerror=a.onload=null,clearTimeout(h);var n=e[s];if(delete e[s],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(r))),t)return t(r)},h=setTimeout(g.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=g.bind(null,a.onerror),a.onload=g.bind(null,a.onload),l&&document.head.appendChild(a)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var r=s.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=s[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={792:0};n.f.j=(t,s)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var o=new Promise(((s,n)=>r=e[t]=[s,n]));s.push(r[2]=o);var i=n.p+n.u(t),a=new Error;n.l(i,(s=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,r[1](a)}}),"chunk-"+t,t)}};var t=(t,s)=>{var r,o,[i,a,l]=s,c=0;if(i.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);l&&l(n)}for(t&&t(s);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},s=self.webpackChunkconfigurator_debug=self.webpackChunkconfigurator_debug||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var o=Object.defineProperty,i=(e,t,s)=>((e,t,s)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class a{constructor(e,t,s,r){i(this,"_side"),i(this,"_incomingMessageBus",null),i(this,"_outgoingMessageBus",null),i(this,"_execMessage",null),this._side=e,this._incomingMessageBus=t,this._outgoingMessageBus=s,this._execMessage=r,this._incomingMessageBus&&this._incomingMessageBus.addEventListener("message",this._handleMessage.bind(this))}setOutgoingMessageBus(e){this._outgoingMessageBus=e}setMessageExecution(e){this._execMessage=e}sendMessage(e,t=[]){return new Promise(((s,r)=>{if(this._incomingMessageBus===this._outgoingMessageBus)return s(void 0);const n=new MessageChannel;n.port1.onmessage=e=>{if(!e||!e.data)return n.port1.close(),n.port2.close(),r(new Error(this._side+" received message but response can not be interpreted"));let t;try{t=JSON.parse(e.data)}catch(e){return n.port1.close(),n.port2.close(),this._prepareError(e),r(e)}t.error?r(t.error):void 0!==t.result?s(t.result):s(void 0),n.port1.close(),n.port2.close()};let o="";try{o=JSON.stringify({message:e,args:t})}catch{return r(new Error(this._side+": can not create command because it is not JSON.stringify able"))}if(!this._outgoingMessageBus)return r(new Error(this._side+": outgoing bus not set yet"));this._outgoingMessageBus.postMessage(o,"*",[n.port2])}))}_handleMessage(e){const t=e.ports&&Array.isArray(e.ports)&&e.ports.length>0?e.ports[0]:null;if(e.data&&t)try{const s=JSON.parse(e.data);if(!this._execMessage)return t.postMessage(JSON.stringify({error:this._side+" is not ready to handle messages"}));Array.isArray(s.args)||(s.args=[s.args]);const r=this._execMessage(s,e);if(void 0===r)return;r.then(((e={})=>{let s,r;"object"==typeof e&&null!==e&&(s=e.error,r=e.result),s?t.postMessage(JSON.stringify({error:s})):void 0!==r?t.postMessage(JSON.stringify({result:r})):t.postMessage(JSON.stringify({result:e}))}),(e=>{t.postMessage(JSON.stringify({error:this._prepareError(e)}))}))}catch(e){t.postMessage(JSON.stringify({error:this._prepareError(e)}))}}_prepareError(e){if("string"==typeof e){const t=this._side+": "+e;return console.error(t),t}return e.message=this._side+": "+e.message,console.error(e),e.message}}const l=["127.0.0.1","localhost","0.0.0.0"],c=["language","browserLanguage","userLanguage","systemLanguage"],u=(e,t)=>{for(const s in t)try{t[s].constructor===Object?e[s]=u(e[s],t[s]):e[s]=t[s]}catch{e[s]=t[s]}return e};var d=(e=>(e.BOTTOM_BAR="bottom_bar",e.PARTLIST_BOUNDS="partlist_bounds",e.INTERACTION_NOTES="interaction_notes",e))(d||{}),g={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};const h={mobileLandscape:!0,floorMaterialRootTag:"materials_root",buttons:{renderimage:!0,requestproduct:!0,requestplan:!0,load_product:!0,partlist_print:!0},elements:{[d.INTERACTION_NOTES]:!1},helpcenter:{roomdesigner:!0,configurator:!1,disable:!1},firstPersonView:!0,saveToIdb:!0,featureFlags:{mocAr:!0,wallAutoHeight:!1},rotationSnapDegrees:10},m=e=>{if(!e)return;const t=Object.keys(e);for(const s of t){const t=e[s];if(!Array.isArray(t)&&"object"==typeof t&&null!==t&&m(t),Array.isArray(t))for(const e of t)m(e);("true"===t||"false"===t)&&(e[s]="true"===t)}},p=()=>{const e={...h};e.locale||(e.locale=((e=null)=>{const t=window.navigator;if(e)return e.substr(0,2);if(Array.isArray(t.languages)&&t.languages.length>0)return t.languages[0].substr(0,2);for(let e=0,s=c.length;e<s;e++){const s=t[c[e]];if(s)return s.substr(0,2)}return"en"})()),"(idle)"===e.id&&delete e.id;const t=(()=>{const e=(()=>{try{return window.self!==window.top}catch{return!0}})();let t=window.location.href;if(e){if(!document.referrer)return null;t=document.referrer}const{hostname:s}=new URL(t);return s})();return t&&(e=>!!(l.includes(e)||e.endsWith("roomle.com")||e.endsWith("gitlab.io")||e.endsWith("gitlab.com")))(t)&&(e.configuratorId="demoConfigurator"),e.customApiUrl=g.VITE_RAPI_URL,e.emails=!1,e},f=()=>/(android)/i.test(navigator.userAgent);class b{constructor(){i(this,"_messageHandler",null),i(this,"isSetupDone",!1),i(this,"viewName","main"),i(this,"plugins",{}),i(this,"pluginsLoaded",[]),i(this,"ui",{callbacks:null}),i(this,"extended",{callbacks:null}),i(this,"configurator",{callbacks:null}),i(this,"analytics",{callbacks:{}}),i(this,"global",{callbacks:{}})}setMessageHandler(e){this._messageHandler=e}handleSetup(e){const{methods:t,callbacks:s}=e;t.forEach((e=>{const t=e.split("."),s=t[0],r=t[1];this[s]||(this[s]={}),this[s][r]=function(){if(this._messageHandler)return this._messageHandler.sendMessage(e,[...arguments]);console.error("MessageHandler not set")}.bind(this)})),s.forEach((e=>{const t=e.split("."),s=t[0],r=t[1],n=t[2];this[s]||(this[s]={}),this[s][r]||(this[s][r]={}),this[s][r][n]=()=>{}})),this.isSetupDone=!0}executeMessage({message:e,args:t}){const s=e.split("."),r=s[0],n=s[1],o=3===s.length?s[2]:null;if(o&&this[r][n][o]){const e=this[r][n][o](...t);return e instanceof Promise?e.then((e=>({result:e}))):void 0!==e?Promise.resolve({result:e}):Promise.resolve({result:null})}return Promise.reject('Message "'+e+'" is unkown')}setupPlugins(e,t,s="website"){for(const r of e)"string"==typeof r&&"dragIn"===r?this.pluginsLoaded.push(new Promise(((e,r)=>{try{n.e(93).then(n.bind(n,93)).then((e=>e.l)).then((({DragIn:n})=>{const o=new n(this.ui,t,s,this.viewName);o.init().then((()=>{this.plugins.dragIn=o,e()}),r)}))}catch(e){r(e)}}))):r.name&&r.loader&&this.pluginsLoaded.push(new Promise(((e,n)=>{try{r.loader().then((o=>{const i=new o(this.ui,t,s,this.viewName);i.init().then((()=>{this.plugins[r.name]=i,e()}),n)}))}catch(e){n(e)}})))}}const v=()=>{let e,t;return{promise:new Promise(((s,r)=>{e=s,t=r})),resolve:e,reject:t}},w=(e,t,s)=>{let r=null;Object.defineProperty(e,t,{get:()=>r||s,set(e){null!=e&&e.mute?r=e.value:(console.warn("You override Roomle defined behaviour. To disalbe this warning pass in an object with the following properties"),console.warn("{ mute: true, value: () => void }"),r=e)}})},y=()=>.01*window.innerHeight+"px",_=e=>{e&&setTimeout((()=>e.style.setProperty(S,y())),0)},M="rml-styles",S="--rml-full-height",I="rml-container",O="rml-fill",P="rml-pos",E="rml-android-height",T="rml-overflow-hidden",k=new Map;class x extends b{constructor(e,t,s,r,n){if(super(),i(this,"_waitForIframe"),i(this,"_container"),i(this,"_configuratorSettings"),i(this,"_initData",{}),i(this,"_iframe"),!e||"string"!=typeof e.id)throw new Error("Please provide a correct configuratorId, you get the correct ID from your Roomle Contact Person");if(k.has(t))throw new Error("There is already an instance on this DOM element");if(!document.getElementById(M)){const e=s.zIndex||9999999,t=document.createElement("style");t.type="text/css",t.id=M;const r="transition:all ease-in-out 450ms;",n=["-webkit-","-o-"].reduce(((e,t)=>e+(t+r)),"")+r,o=y();t.innerHTML=`\n        .${I}{${S}:${o};}\n        .${P}{position:fixed;top:0;left:0;z-index:${e};opacity:0}\n        .rml-transition{${n}}\n        .${O}{width:100%;height:100%;opacity:1}\n        .${E}{height:calc(var(${S},1vh)*100)}\n        .${T}{overflow:hidden}\n      `,document.head.appendChild(t)}this._executeMessage=this._executeMessage.bind(this);const o=new a("website",window,null,this._executeMessage);this.setMessageHandler(o),this._onResize=this._onResize.bind(this),f()&&window.addEventListener("resize",this._onResize),this._container=t,this._initData=s,this._configuratorSettings=e;const l=this._createIframe();this._onUseFullPage=this._onUseFullPage.bind(this),this._onBackToWebsite=this._onBackToWebsite.bind(this),this._waitForIframe=n,this._container.appendChild(l),this._iframe=l,this.setupPlugins(r,this._iframe),k.set(t,!0)}static createPlanner(e,t,s,r=[]){return this._create(e,t,s,r)}static async connect(e,t=[]){const s=new b;s.viewName=e;const{resolve:r,promise:n}=v(),{resolve:o,promise:i}=v(),l=new a("custom-view-"+e,window,window.parent,(({message:e,args:t})=>{switch(e){case"registerCustomViewDone":r();break;case"returnMethods":s.handleSetup(t[0]),o();break;default:if(s.isSetupDone)return s.executeMessage({message:e,args:t})}}));s.setMessageHandler(l);const c=[e];return l.sendMessage("registerCustomView",c),await n,l.sendMessage("getMethods",c),await i,s.setupPlugins(t,document.body,"custom-view"),await Promise.allSettled(s.pluginsLoaded),s}static createConfigurator(e,t,s,r=[]){return this._create(e,t,s,r)}static create(e,t,s,r){return this._create(e,t,s,r)}static createViewer(e,t,s,r=[]){return this._create(e,t,s,r)}static async _create(e,t,s,r){return new Promise((async(n,o)=>{try{const o=u(p(),(m(i=s),null!=i&&i.customApiUrl&&(i.customApiUrl=decodeURIComponent(i.customApiUrl)),i.shareUrl&&(i.deeplink=i.shareUrl.replace("<CONF_ID>","#CONFIGURATIONID#")),i));(e=>{e.featureFlags||(e.featureFlags={}),"boolean"!=typeof e.featureFlags.realPartList&&(e.featureFlags.realPartList=!0),"boolean"!=typeof e.featureFlags.globalCallbacks&&(e.featureFlags.globalCallbacks=!0),"boolean"!=typeof e.featureFlags.mocAr&&(e.featureFlags.mocAr=!1)})(o);const a=await(async(e,t)=>{if("string"!=typeof e)throw new Error('Configurator ID is not a string type: "'+typeof e+'"');const s=t.customApiUrl?t.customApiUrl:"https://api.roomle.com/v2",r=t.overrideTenant||9,n=s+"/configurators/"+e,o="roomle_portal_v2",i="03-"+window.btoa((new Date).toISOString()+";anonymous;"+o),a=new Request(n,{method:"GET",headers:new Headers({apiKey:o,currentTenant:r,locale:"en",language:"en",device:1,token:i,platform:"web"}),mode:"cors",cache:"default"}),l=await fetch(a),{configurator:c}=await l.json();return c})(e,o);s=((e,t)=>{t.configuratorId=e.id;const s=e.settings||{};return!t.overrideTenant&&e.tenant&&(t.overrideTenant=e.tenant),((e,t)=>{const s=JSON.parse(JSON.stringify(e));return u(s,t)})(s,t)})(a,o);const l=new this(a,t,s,r,n);return await Promise.allSettled(l.pluginsLoaded),l}catch(e){return o(e)}var i}))}teardown(){this._container&&k.delete(this._container);const e=this._container.querySelector("iframe");e&&this._container.removeChild(e),window.removeEventListener("resize",this._onResize)}_createIframe(){var e;const t=document.createElement("iframe");let s=(null==(e=this._configuratorSettings)?void 0:e.url)||"https://www.roomle.com/t/cp/";return this._initData.useLocalRoomle&&(s=location.href.replace("embedding.html","")),location.href.includes("roomle.gitlab.io")&&(s=location.href.replace("embedding.html","index.html")),this._initData.overrideServerUrl&&(s=this._initData.overrideServerUrl),t.src=s,t.classList.add(I),t.classList.add(O),t}_onResize(){_(this._iframe)}_onUseFullPage(){this._iframe.classList.add(P),document.documentElement.classList.add(T),window.document.body.classList.add(T),f()&&(_(this._iframe),this._iframe.classList.add(E))}_onBackToWebsite(){this._iframe.classList.remove(P),this._iframe.classList.remove(E),document.documentElement.classList.remove(T),window.document.body.classList.remove(T)}_executeMessage({message:e,args:t},s){var r;if(s.source&&s.source===(null==(r=this._iframe)?void 0:r.contentWindow))return"requestBoot"===e?this._messageHandler?(this._messageHandler.setOutgoingMessageBus(s.source),Promise.resolve({result:this._initData})):(console.error("MessageHandler not set"),Promise.resolve({error:"MessageHandler not set"})):"setup"===e?(this.handleSetup(t[0]),w(this.ui.callbacks,"onUseFullPage",this._onUseFullPage),w(this.ui.callbacks,"onBackToWebsite",this._onBackToWebsite),this._waitForIframe(this),setTimeout((()=>{this._messageHandler?this._messageHandler.sendMessage("websiteReady"):console.error("MessageHandler not set")}),0),Promise.resolve({result:null})):this.executeMessage({message:e,args:t})}}var A=function(e,t,s,r){return new(s||(s=Promise))((function(n,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))};const L=window.location.search,N=new URLSearchParams(L),B=N.get("id"),C=N.get("serverUrl"),R=[],j=document.getElementById("value-table"),U=()=>{var e;const t=parseInt(F.value,10);if(t<R.length){const s=R[t],r=$.value;if(Object.prototype.hasOwnProperty.call(s.valueMaps,r)){const n=t>0?R[t-1]:null,o=null!==(e=null==n?void 0:n.valueMaps[r])&&void 0!==e?e:void 0;((e,t)=>{J(j);for(const[s,r]of Object.entries(e.values)){let e=null;t&&Object.prototype.hasOwnProperty.call(t.values,s)&&(e=t.values[s]);const n=j.insertRow(),o=n.insertCell(0),i=n.insertCell(1);o.textContent=s,i.textContent=r,null===e?(o.style.color="blue",i.style.color="blue"):e!==r&&(i.style.color="red")}})(s.valueMaps[r],o)}}},$=document.getElementById("map-selection");$.onchange=()=>U();const D=e=>{const t=$.value;let s=0;$.options.length=0;for(const[,r]of Object.entries(e.valueMaps)){if(0===Object.keys(r.values).length||"subpart"===r.type)continue;t===r.id.toString()&&(s=$.options.length);const e=`(id: ${r.id}, parentId: ${r.parentId}) ${r.type} ${r.componentId} ${r.internalId}`;H($,e,r.id)}for(const[,r]of Object.entries(e.valueMaps)){if(0===Object.keys(r.values).length||"subpart"!==r.type)continue;t===r.id.toString()&&(s=$.options.length);const e=`(id: ${r.id}, parentId: ${r.parentId}) ${r.type} ${r.componentId} ${r.internalId}`;H($,e,r.id)}$.selectedIndex=s,U()},F=document.getElementById("update-selection");F.onchange=()=>{const e=parseInt(F.value,10);e<R.length&&D(R[e])};const H=(e,t,s)=>{const r=document.createElement("option");r.text=t,r.value=s.toString(),e.add(r)},J=e=>{const t=e.getElementsByTagName("tbody")[0];if(t)for(;t.rows.length>0;)t.deleteRow(0)},z={id:null!=B?B:"usm:frame",overrideServerUrl:null!=C?C:"https://www.roomle.com/t/bo-mvp/",customApiUrl:"https://api.roomle.com/v2"};A(void 0,void 0,void 0,(function*(){const e=yield((e,t)=>A(void 0,void 0,void 0,(function*(){return yield x.createConfigurator("demoConfigurator",e,t,["dragIn"])})))(document.getElementById("configurator-container"),z);e.extended.callbacks.onValueMapChanged=e=>{(e=>{const t=R.length;R.push(e);const s=`(${e.sourceId}) ${e.sourceInfo}`;H(F,s,t),F.selectedIndex=t,D(e)})(e)},e.extended.enableDebugging()}))})();